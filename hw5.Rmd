---
title: "hw5"
author: "Shan Jiang"
date: "11/2/2018"
output: github_document
---
```{r}
library(tidyverse)
library(rvest)
library(ggplot2)

set.seed(1)
```

## Problem 1

Inspecting the file path and file names in the zip.
```{r}
file_path <- "./data/"
length(list.files(file_path))  # How many files are there?
list.files(file_path)  # Show all names
list.files(file_path)[11:20]  # Show last 10 names

```

Create a tidy dataframe containing data from all participants, including the subject ID, arm, and observations over time.


### Construct a dataframe using the `list.files` function
```{r}
## Construct a function to read the csv file
read_sheet <- function(path) {
   df = readr::read_csv(path) %>% 
   janitor::clean_names()
   
   df
}

## Construct the path 

base = "./data/"
p = list.files(file_path)
vec_name = str_c(base, c(p))

control_df = map_df(vec_name, read_sheet)

```

* Tidy the result: file names include the subject ID and arm.
```{r}
# Calling the ifelse function within mutate to label 2 Arms
control_df = control_df %>% 
  mutate(ID = 1:20) %>% 
  mutate(Arm = ifelse(ID < 11, yes = "control", no = "exprimental")) %>%  
  select(Arm, ID, week_1:week_8) %>% 
  gather(key = No_week, value = measurement, week_1:week_8)

```

### Spaghetti plot 
```{r}
control_df %>% 
ggplot(aes(x = No_week, y = measurement, group = ID)) +
  geom_line(aes(color = Arm)) + 
  facet_wrap(~ID) +
 theme(text = element_text(size = 9),
        axis.text.x = element_text(angle=90, hjust=1)) 
```
* Comment on differences between groups.
From the above faceting Graph, we showed the absolute value of measurement and the gap of the two groups. 
1. On averge, subjects in the Experimental group attains a higher measurement value than the control group compared to the control group from week 1 to 8. 



## Problem 2
Import the raw data.
```{r}
require(RCurl)
homicide_raw = read.csv( text = getURL("https://raw.githubusercontent.com/washingtonpost/data-homicides/master/homicide-data.csv"))
```

### Describe the raw data.
The raw data is made up three parts of sheets. 

```{r}

```


